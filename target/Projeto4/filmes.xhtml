<!DOCTYPE HTML>
<HTML lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">

<h:head>
  <link rel="apple-touch-icon" sizes="76x76" href="resources/img/apple-icon.png"/>
  <link rel="icon" type="image/png" href="resources/img/favicon.png"/>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <title>
    Projeto 4 - VideoLocadora
  </title>
  <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />
  <!--     Fonts and icons     -->
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css"/>
  <!-- CSS Files -->
  <link href="resources/css/material-dashboard.css?v=2.1.0" rel="stylesheet" />
</h:head>
<h:body class="dark-edition">
<div class="wrapper ">
  <div class="main-panel">
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-transparent navbar-absolute fixed-top " id="navigation-example">
      <div class="container-fluid">
        <div class="navbar-wrapper" style="margin-top: -10px">
          <img src="resources/img/logo.png" style="width: 100%; margin-bottom: 10px"/>
        </div>
        <div class="collapse navbar-collapse justify-content-end">
          <ul class="navbar-nav" style="margin-rigth: 5px;">
            <h:button outcome="cadastrarFilme.xhtml" type="button" class="btn btn-primary" value="Adicionar"> </h:button>
          </ul>
          <ul class="navbar-nav" style="margin-left: 5px;">
            <h:button outcome="index.xhtml" type="button" class="btn btn-default" value="Voltar"> </h:button>
          </ul>
        </div>
      </div>
    </nav>
    <!-- End Navbar -->
    <div class="content">
      <div class="container-fluid">
        <div class="row">
          <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6">
            <div class="card card-stats">
              <div class="card-header card-header-warning card-header-icon">
                <div class="card-icon">
                  <i class="material-icons">movie</i>
                </div>
                <p class="card-category">Total de Filmes</p>
                <h3 class="card-title">#{filmeBean.totalDeFilmes()}</h3>
              </div>
              <div class="card-footer">
              </div>
            </div>
          </div>
          <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6">
            <div class="card card-stats">
              <div class="card-header card-header-success card-header-icon">
                <div class="card-icon">
                  <i class="material-icons">store</i>
                </div>
                <p class="card-category">Média de Preço</p>
                <h3 class="card-title">R$#{filmeBean.precoMedioLocacao()}</h3>
              </div>
              <div class="card-footer">
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-12 col-md-12">
            <div class="card">
              <div class="card-header card-header-primary">
                <h4 class="card-title">Lista de FIlmes</h4>
              </div>
              <div class="card-body table-responsive">
                <h:form id="formFilme">
                  <h:dataTable id="tabelaFilmes" binding="#{table}" value="#{filmeBean.dataModel}" var="filme" styleClass="table table-hover">
                    <h:column>
                      <f:facet name="header" class="text-warning">#</f:facet>
                      <h:outputText value="#{filme.id}"></h:outputText>
                    </h:column>
                    <h:column>
                      <f:facet name="header" class="text-warning">Título</f:facet>
                      <h:outputText value="#{filme.titulo}"></h:outputText>
                    </h:column>
                    <h:column>
                      <f:facet name="header" class="text-warning">Descrição</f:facet>
                      <h:outputText value="#{filme.descricao}"></h:outputText>
                    </h:column>
                    <h:column>
                      <f:facet name="header" class="text-warning">Ano de Lançamento</f:facet>
                      <h:outputText value="#{filme.anoLancamento}"></h:outputText>
                    </h:column>
                    <h:column>
                      <f:facet name="header" class="text-warning">Valor de Locação</f:facet>
                      <h:outputText value="R$#{filme.custoAluguel}"></h:outputText>
                    </h:column>

                    <h:column>
                      <f:facet name="header">Ações</f:facet>
                      <h:commandLink  action="#{filmeBean.editar(filme.id)}" styleClass="btn btn-primary">
                        <i class="bi bi-pen-fill"></i>
                      </h:commandLink>
                      <h:commandLink action="#{filmeBean.deletar(filme.id)}" styleClass="btn btn-danger">
                        <i class="bi bi-trash2-fill"></i>
                      </h:commandLink>
                    </h:column>
                  </h:dataTable>
                  <h:panelGroup rendered="#{filmeBean.dataModel.rowCount > 0}">
                    <div>
                      <h:outputText value="#{filmeBean.pagination.pageFirstItem + 1}..#{filmeBean.pagination.pageLastItem + 1}/#{filmeBean.pagination.itemsCount}"/>
                    </div>
                    <div>
                      <h:commandLink action="#{filmeBean.previous}" value="Página Anterior" rendered="#{filmeBean.pagination.hasPreviousPage}"/>
                    </div>
                    <div>
                      <h:commandLink action="#{filmeBean.next}" value="Próxima Página" rendered="#{filmeBean.pagination.hasNextPage}"/>
                    </div>
                  </h:panelGroup>
                </h:form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <footer class="footer">
      <div class="container-fluid">
        Cássio Gamarra - Tópicos Avançados II
      </div>
    </footer>
  </div>
</div>
</h:body>
</HTML>